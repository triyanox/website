---
title: "Docker : The basics"
date: "2022-02-23"
description: "Learn the basics of Docker and Containers"
tags: ["docker", "containers", "devops"]
---

## Docker

Docker is a powerful containerization technology that enables the development and deployment of applications in a consistent and isolated environment. Unlike traditional virtual machines, which require a separate operating system for each instance, Docker containers share the host system's kernel, making them lightweight and efficient.

### Advantages of Docker

1. **Resource Efficiency**: Docker containers are more lightweight compared to virtual machines, as they do not require a separate operating system. This leads to better utilization of system resources, allowing you to run more containers on the same host machine.

2. **Isolation**: Containers provide a high level of isolation between applications and their dependencies. Each container has its own file system, network interfaces, and process space, ensuring that changes made to one container do not affect others.

3. **Portability**: Docker containers are highly portable, meaning you can run them on any system that has Docker installed, regardless of the underlying operating system. This makes it easier to develop and deploy applications across different environments.

4. **Scalability**: Docker makes it simple to scale applications horizontally by allowing you to easily create multiple instances of a container and distribute the workload across them. Containers can be quickly started, stopped, or replicated to meet the changing demands of your application.

5. **Version Control**: Docker enables version control for your application's dependencies by using container images. Images serve as blueprints for creating containers and can be versioned, tagged, and shared, ensuring consistent deployments across different stages of the application's lifecycle.

### Dockerfile

To create a Docker image, you need to define a Dockerfile. A Dockerfile is a text file that contains a series of instructions to build an image. These instructions specify the base image, install dependencies, copy files, set environment variables, and define runtime commands.

Using a Dockerfile, you can automate the process of creating a reproducible and self-contained image that includes all the necessary components for your application to run.

### Creating an Image

Let's walk through an example of creating a Docker image for a Flask application:

```Dockerfile
FROM python:3.8.9-alpine
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "app.py"]
```

In this example:

- `FROM python:3.8.9-alpine` sets the base image as Python 3.8.9 on Alpine Linux, which provides a minimal and lightweight environment.

- `WORKDIR /app` sets the working directory within the container to `/app`.

- `COPY requirements.txt .` copies the `requirements.txt` file from the host to the container's working directory.

- `RUN pip install --no-cache-dir -r requirements.txt` installs the dependencies specified in `requirements.txt` using pip.

- `COPY . .` copies the remaining application code from the host to the container's working directory.

- `CMD ["python", "app.py"]` specifies the command to run when the container is started.

### Building an Image

To build the Docker image using the Dockerfile, run the following command in the directory containing the Dockerfile:

```bash
docker build -t flask-docker-boilerplate .
```

The `-t` flag allows you to tag the image with a name (`flask-docker-boilerplate` in this example) for easier reference.

### Running a Container

To run a container based on the created image, use the `docker run` command:

```bash
docker run -p 3000:5000 flask-docker-boilerplate
```

The `-p` flag maps the container's port 5000 to the host's port 3000, allowing access to the Flask application

 running inside the container.

### Logging

To view the logs of a running container, you can use the `docker logs` command:

```bash
docker logs <container_id or container_name>
```

This will display the logs generated by the container's application.

### DockerHub

[Docker Hub](https://hub.docker.com/) is a central registry that allows you to store, share, and distribute Docker images with the community. It serves as a platform for collaborating on container-based projects and simplifying the deployment process.

To push your Docker image to Docker Hub, follow these steps:

1. Create a Docker Hub account at [https://hub.docker.com/](https://hub.docker.com/).

2. Log in to Docker Hub using the `docker login` command:

   ```bash
   docker login
   ```

   Enter your Docker Hub username and password when prompted.

3. Tag your local image with your Docker Hub username and repository name:

   ```bash
   docker tag flask-docker-boilerplate <your_docker_hub_username>/flask-docker-boilerplate:latest
   ```

   This command associates your image with a specific repository on Docker Hub.

4. Push the image to Docker Hub:

   ```bash
   docker push <your_docker_hub_username>/flask-docker-boilerplate:latest
   ```

   This uploads the image to your Docker Hub repository.

### Deploying Changes

To deploy changes to your application, follow these steps:

1. Modify your application's code, such as the Flask route or the message it displays.

2. Rebuild the Docker image:

   ```bash
   docker build -t flask-docker-boilerplate .
   ```

3. Push the updated image to Docker Hub:

   ```bash
   docker push <your_docker_hub_username>/flask-docker-boilerplate:latest
   ```

   This ensures that the latest version of your application is available for deployment.

### Caching Mechanism

Docker uses a caching mechanism to speed up the image building process. Each instruction in the Dockerfile creates a layer in the image. If a layer has not changed, Docker will reuse the cached layer instead of rebuilding it.

To take advantage of caching, it is recommended to order the instructions in the Dockerfile from least frequently changing to most frequently changing. This way, Docker can reuse as many cached layers as possible during subsequent builds, saving time and resources.

### Conclusion

Docker simplifies the development, deployment, and management of applications by providing a lightweight and portable containerization platform. It allows you to package your application and its dependencies into a single unit, ensuring consistency across different environments.

By understanding the basics of Docker, such as Dockerfiles, image building, running containers, and utilizing Docker Hub, you can leverage the power of containerization to enhance your software development workflow and streamline deployment processes.
